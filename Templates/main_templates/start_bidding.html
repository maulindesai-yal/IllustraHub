{% extends 'main_templates/main_base.html' %}
{% load static %}

{% block title %}Start Live Bidding - {{ illustration.title }}{% endblock %}

{% block content %}
    <!-- Start Bidding Hero Section -->
    <section class="start-bidding-hero">
        <div class="hero-content">
            <h1>Start Live Bidding</h1>
            <p>Configure your auction settings for {{ illustration.title }}</p>
        </div>
    </section>

    <!-- Start Bidding Section -->
    <section class="start-bidding-section">
        <div class="container">
            <div class="bidding-setup-grid">
                <!-- Illustration Preview -->
                <div class="illustration-preview">
                    <div class="preview-image">
                        <img src="{{ illustration.image.url }}" alt="{{ illustration.title }}">
                        <div class="image-overlay">
                            <button class="zoom-btn" onclick="toggleZoom()">
                                <i class="fas fa-search-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="preview-info">
                        <h2>{{ illustration.title }}</h2>
                        <p class="description">{{ illustration.description }}</p>
                        <div class="info-grid">
                            <div class="info-item">
                                <i class="fas fa-tag"></i>
                                <div class="info-content">
                                    <span class="label">Starting Price</span>
                                    <span class="value">${{ illustration.price }}</span>
                                </div>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-paint-brush"></i>
                                <div class="info-content">
                                    <span class="label">Category</span>
                                    <span class="value">{{ illustration.category.name }}</span>
                                </div>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-user"></i>
                                <div class="info-content">
                                    <span class="label">Artist</span>
                                    <span class="value">{{ illustration.uploaded_by.first_name }} {{ illustration.uploaded_by.last_name }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bidding Configuration Form -->
                <div class="bidding-config">
                    <form method="POST" action="{% url 'start_bidding' illustration.id %}" class="config-form">
                        {% csrf_token %}
                        
                        <div class="form-section">
                            <h3><i class="fas fa-clock"></i> Auction Duration</h3>
                            <div class="form-group">
                                <label for="duration">Auction Duration</label>
                                <div class="duration-inputs" data-base-price="{{ illustration.price }}">
                                    <div class="duration-option">
                                        <input type="radio" id="duration-1" name="duration" value="1" checked>
                                        <label for="duration-1">1 Day</label>
                                    </div>
                                    <div class="duration-option">
                                        <input type="radio" id="duration-3" name="duration" value="3">
                                        <label for="duration-3">3 Days</label>
                                    </div>
                                    <div class="duration-option">
                                        <input type="radio" id="duration-7" name="duration" value="7">
                                        <label for="duration-7">7 Days</label>
                                    </div>
                                </div>
                                <div class="end-time-summary">
                                    <p>Auction will end on: <span id="end-time">Calculating...</span></p>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-dollar-sign"></i> Reserve Price</h3>
                            <div class="form-group">
                                <label for="reserve_price">Set Reserve Price (Optional)</label>
                                <div class="input-group">
                                    <span class="currency">$</span>
                                    <input type="number" 
                                           id="reserve_price" 
                                           name="reserve_price" 
                                           step="0.01" 
                                           min="{{ illustration.price }}" 
                                           placeholder="Minimum acceptable price"
                                           class="form-input">
                                </div>
                                <p class="help-text">Item won't sell if bidding doesn't reach this amount</p>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-cog"></i> Auction Settings</h3>
                            <div class="form-group checkbox">
                                <div class="checkbox-wrapper">
                                    <input type="checkbox" id="auto_extend" name="auto_extend" checked>
                                    <label for="auto_extend">
                                        <span class="checkbox-label">Auto-extend auction</span>
                                        <span class="checkbox-description">Extend by 5 minutes if bid is placed in last 5 minutes</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group checkbox">
                                <div class="checkbox-wrapper">
                                    <input type="checkbox" id="notify_bids" name="notify_bids" checked>
                                    <label for="notify_bids">
                                        <span class="checkbox-label">Enable bid notifications</span>
                                        <span class="checkbox-description">Receive notifications for new bids</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> Auction Summary</h3>
                            <div class="auction-summary">
                                <div class="summary-item">
                                    <span class="label">Starting Price</span>
                                    <span class="value">${{ illustration.price }}</span>
                                </div>
                                <div class="summary-item">
                                    <span class="label">Duration</span>
                                    <span class="value" id="duration-summary">24 Hours</span>
                                </div>
                                <div class="summary-item">
                                    <span class="label">Reserve Price</span>
                                    <span class="value" id="reserve-summary">Not Set</span>
                                </div>
                                <div class="summary-item total">
                                    <span class="label">Estimated End Time</span>
                                    <span class="value" id="end-time-summary"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <a href="{% url 'illustration_details' illustration.id %}" class="cancel-btn">
                                <i class="fas fa-times"></i>
                                Cancel
                            </a>
                            <button type="submit" class="start-bidding-btn">
                                <i class="fas fa-gavel"></i>
                                Start Auction
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Zoom Modal -->
    <div id="zoomModal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="zoomedImage">
    </div>

    <script src="{% static 'js/script.js' %}"></script>
{% endblock %}